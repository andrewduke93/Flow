import{r as c,j as e,R as Y}from"./animations-D9Wo9mUM.js";import{u as X,T as Q}from"./index-BnoAoqzm.js";import{u as ee,R as I}from"./rsvp-ChCL7CNZ.js";import{T as H}from"./cloud-uA1tuQWL.js";import{M as le,l as ce,m as de,n as he,o as pe,P as ue,p as xe,q as ge,E as me,r as fe,s as ye,t as be}from"./icons-DhCoUMbR.js";import"./vendor-react-uIRdnfX0.js";class R{constructor(){this.words=[],this.sourceText="",this.totalWords=0,this._position=0,this._isPlaying=!1,this._wpm=300,this.playbackTimer=null,this.positionListeners=new Set,this.playStateListeners=new Set}static getInstance(){return R.instance||(R.instance=new R),R.instance}load(n){if(this.stop(),this.sourceText=n,this.words=[],!n||n.length===0){this.totalWords=0;return}const s=Math.ceil(n.length/5);this.words=new Array(s);let t=0,a=-1,o=!0,r=!1;for(let i=0;i<=n.length;i++){const h=i<n.length?n[i]:" ",x=h===" "||h==="	"||h===`
`||h==="\r";if(h===`
`&&(r=!0),x&&!o&&a>=0){const f=n.slice(a,i);let m=0;const p=f[f.length-1];p==="."||p==="!"||p==="?"?m=2:(p===","||p===";"||p===":"||p==="â€”"||p==="â€“")&&(m=1),this.words[t]={text:f,start:a,end:i,index:t,trailingPause:m},t++,a=-1}else!x&&o&&(a=i,r&&t>0&&(this.words[t-1].trailingPause=3),r=!1);o=x}this.words.length=t,this.totalWords=t}get position(){return this._position}set position(n){const s=Math.max(0,Math.min(this.totalWords-1,n));s!==this._position&&(this._position=s,this.notifyPosition())}get progress(){return this.totalWords>0?this._position/this.totalWords:0}set progress(n){this.position=Math.floor(n*this.totalWords)}get total(){return this.totalWords}getWord(n){return this.words[n]||null}getCurrentWord(){return this.words[this._position]||null}getWindow(n,s){const t=Math.max(0,this._position-n),a=Math.min(this.totalWords,this._position+s);return this.words.slice(t,a)}getRange(n,s){const t=Math.max(0,n),a=Math.min(this.totalWords,t+s);return this.words.slice(t,a)}getParagraphs(n,s){const t=[];let a=[],o=n;for(let r=n;r<this.totalWords&&t.length<s;r++){const i=this.words[r];a.length===0&&(o=r),a.push(i),i.trailingPause===3&&(t.push({words:a,startIndex:o}),a=[])}return a.length>0&&t.length<s&&t.push({words:a,startIndex:o}),t}wordIndexFromProgress(n){return Math.floor(n*this.totalWords)}get isPlaying(){return this._isPlaying}get wpm(){return this._wpm}set wpm(n){this._wpm=Math.max(50,Math.min(1500,n)),this._isPlaying&&(this.stop(),this.play())}play(){this._isPlaying||this.totalWords===0||(this._isPlaying=!0,this.notifyPlayState(),this.scheduleNext())}stop(){this.playbackTimer!==null&&(clearTimeout(this.playbackTimer),this.playbackTimer=null),this._isPlaying&&(this._isPlaying=!1,this.notifyPlayState())}toggle(){this._isPlaying?this.stop():this.play()}scheduleNext(){if(!this._isPlaying)return;const n=this.getCurrentWord();if(!n){this.stop();return}let s=6e4/this._wpm;const t=n.trailingPause;t===1?s*=1.3:t===2?s*=1.8:t===3&&(s*=2.2);const a=n.text.length;a>10?s*=1.2:a>7?s*=1.1:a<=2&&(s*=.85),this.playbackTimer=window.setTimeout(()=>{this._position<this.totalWords-1?(this.position=this._position+1,this.scheduleNext()):this.stop()},s)}skipForward(n=10){this.position=this._position+n}skipBack(n=10){this.position=this._position-n}jumpToStart(){this.position=0}jumpToEnd(){this.position=this.totalWords-1}onPosition(n){return this.positionListeners.add(n),()=>this.positionListeners.delete(n)}onPlayState(n){return this.playStateListeners.add(n),()=>this.playStateListeners.delete(n)}notifyPosition(){const n=this._position;this.positionListeners.forEach(s=>s(n))}notifyPlayState(){const n=this._isPlaying;this.playStateListeners.forEach(s=>s(n))}getStats(){return{totalWords:this.totalWords,position:this._position,progress:this.progress,isPlaying:this._isPlaying,wpm:this._wpm}}cleanup(){this.stop(),this.words=[],this.sourceText="",this.totalWords=0,this._position=0}}class _{static getInstance(){return _.instance||(_.instance=new _),_.instance}async processBook(n,s,t,a){const o=performance.now();a?.("tokenizing",20);const r=this.tokenizeWithORP(t);a?.("tokenizing",60);const i=this.buildParagraphs(r);a?.("optimizing",80);const h=await this.preRenderParagraphs(i);a?.("ready",100);const x=performance.now()-o;return{id:n,title:s,paragraphs:h,totalWords:r.length,wordIndex:r,metadata:{importTime:x,wordCount:r.length,paragraphCount:h.length,estimatedReadingTime:Math.ceil(r.length/300)}}}tokenizeWithORP(n){const s=[];let t=0,a=-1,o=!0,r=!1;for(let i=0;i<=n.length;i++){const h=i<n.length?n[i]:" ",x=h===" "||h==="	"||h===`
`||h==="\r";if(h===`
`&&(r=!0),x&&!o&&a>=0){const f=n.slice(a,i);let m=0;const p=f[f.length-1];p==="."||p==="!"||p==="?"?m=2:(p===","||p===";"||p===":"||p==="â€”"||p==="â€“")&&(m=1);const w=this.computeOptimalRecognitionPoint(f);s.push({text:f,index:t,orpIndex:w,trailingPause:m,start:a,end:i}),t++,a=-1}else!x&&o&&(a=i,r&&s.length>0&&(s[s.length-1].trailingPause=3),r=!1);o=x}return s}computeOptimalRecognitionPoint(n){const s=n.length;return s<=1||s<=3?0:s<=8?Math.floor(s*.35):s<=12?Math.floor(s*.4):Math.min(12,Math.floor(s*.4))}buildParagraphs(n){const s=[];let t=[],a=0;for(let o=0;o<n.length;o++){const r=n[o];t.length===0&&(a=r.index),t.push(r),(r.trailingPause===3||o===n.length-1)&&(s.push({words:t,startIndex:a,endIndex:r.index,text:""}),t=[])}return s}async preRenderParagraphs(n){return new Promise(s=>{const t=[],a=o=>{const i=Math.min(o+10,n.length);for(let h=o;h<i;h++){const x=n[h],d=x.words.map(f=>`<span data-index="${f.index}" class="flow-word">${f.text}</span>`).join(" ");t.push({...x,text:d})}i<n.length?requestIdleCallback(()=>a(i)):s(t)};a(0)})}getWord(n,s){return n.wordIndex[s]||null}getParagraph(n,s){let t=0,a=n.paragraphs.length-1;for(;t<=a;){const o=Math.floor((t+a)/2),r=n.paragraphs[o];if(s>=r.startIndex&&s<=r.endIndex)return r;s<r.startIndex?a=o-1:t=o+1}return null}getVisibleParagraphs(n,s,t){return n.paragraphs.slice(s,s+t)}}const we=Y.memo(({word:l,fontSize:n,fontFamily:s,textColor:t,accentColor:a,isHighlighted:o,onClick:r})=>{const i=l.text,h=i.slice(0,l.orpIndex),x=i[l.orpIndex]||"",d=i.slice(l.orpIndex+1);return e.jsxs("span",{"data-index":l.index,onClick:f=>{f.stopPropagation(),r(l.index)},className:`flow-word ${o?"highlighted":""}`,style:{cursor:"pointer",userSelect:"none",WebkitUserSelect:"none",marginRight:"0.25ch",padding:"0 0.15ch",borderRadius:4,transition:"all 0.15s ease",backgroundColor:o?"rgba(255,215,0,0.08)":"transparent",fontSize:`${n}px`,fontFamily:s,color:t,lineHeight:1.4},children:[e.jsx("span",{style:{color:t,opacity:.8},children:h}),e.jsx("span",{style:{color:a,fontWeight:700},children:x}),e.jsx("span",{style:{color:t,opacity:.8},children:d})]})}),je=Y.memo(({paragraph:l,fontSize:n,lineHeight:s,paragraphSpacing:t,fontFamily:a,textColor:o,accentColor:r,currentWordIndex:i,onWordClick:h})=>{const x=i>=l.startIndex&&i<=l.endIndex;return e.jsx("p",{"data-start":l.startIndex,className:"flow-paragraph",style:{fontSize:`${n}px`,lineHeight:s,marginBottom:`${t}px`,marginTop:0,fontFamily:a,color:o,textAlign:"justify",hyphens:"auto",WebkitHyphens:"auto",textRendering:"optimizeLegibility",opacity:x?1:.85,transition:"opacity 0.2s ease",cursor:"text"},children:l.words.map(d=>e.jsx(we,{word:d,fontSize:n,fontFamily:a,textColor:o,accentColor:r,isHighlighted:d.index===i,onClick:h},d.index))})}),Se=Y.memo(({currentWord:l,fontSize:n,fontFamily:s,textColor:t,accentColor:a})=>{if(!l)return null;const o=l.text,r=o.slice(0,l.orpIndex),i=o[l.orpIndex]||"",h=o.slice(l.orpIndex+1);return e.jsxs("div",{className:"flow-rsvp-display",style:{display:"grid",gridTemplateColumns:"1fr auto 1fr",alignItems:"baseline",fontFamily:s,fontSize:`${n}px`,fontWeight:500,whiteSpace:"nowrap",width:"100%",maxWidth:"90vw",willChange:"transform",transform:"translateZ(0)"},children:[e.jsx("span",{style:{color:t,textAlign:"right",paddingRight:"2px"},children:r}),e.jsx("span",{style:{color:a,fontWeight:700,textShadow:`0 0 8px ${a}20`},children:i}),e.jsx("span",{style:{color:t,textAlign:"left",paddingLeft:"2px"},children:h})]})}),ve=({book:l,onToggleChrome:n,isActive:s,showGhostWords:t=!0})=>{const a=R.getInstance(),o=_.getInstance(),r=X(),{settings:i}=ee(),h=c.useRef(null),x=c.useRef(null),[d,f]=c.useState(null),[m,p]=c.useState(!1),[w,E]=c.useState(!1),[$,F]=c.useState(null),[M,T]=c.useState([]),[z,B]=c.useState("extracting"),[O,W]=c.useState(0),[A,D]=c.useState(null),U=c.useRef(!1),V=c.useRef(0),G=c.useRef(!1),P=c.useRef();c.useRef(null);const[Z,u]=c.useState(0),[S,k]=c.useState(0),L={"New York":'"New York", "Iowan Old Style", Palatino, Georgia, serif',"SF Pro":'"SF Pro Text", -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif',OpenDyslexic:'"OpenDyslexic", "Comic Sans MS", sans-serif',"Atkinson Hyperlegible":'"Atkinson Hyperlegible", Verdana, sans-serif'}[i.fontFamily]||'"SF Pro Text", -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif',te=Math.min(i.fontSize*2.5,60);c.useEffect(()=>{if(!l.chapters||l.chapters.length===0){p(!0);return}p(!1),B("extracting"),W(0);const g=l.chapters.reduce((y,v)=>y+(v.content?.length||0),0),j=Math.min(5e3,Math.max(1e3,g*.1));D(j);const C=[...l.chapters].sort((y,v)=>y.sortOrder-v.sortOrder),N=[];for(const y of C)if(y.content){const v=y.content.replace(/<[^>]*>/g," ").replace(/&[a-z]+;/gi," ").replace(/\s+/g," ").trim();v&&N.push(v)}const b=N.join(`

`);W(10),o.processBook(l.id,l.title||"Untitled",b,(y,v)=>{B(y),W(v)}).then(y=>{f(y),W(100),B("ready"),a.wpm=i.rsvpSpeed||300,V.current=a.position,F(o.getWord(y,a.position)),p(!0),q(y,a.position)})},[l.id]);const q=c.useCallback((g,j)=>{if(!h.current)return;const C=h.current,N=C.clientHeight;C.scrollTop;const b=i.fontSize*i.lineHeight+i.paragraphSpacing,y=Math.ceil(N/b)+2,v=g.paragraphs.findIndex(K=>j>=K.startIndex&&j<=K.endIndex),J=Math.max(0,v-Math.floor(y/2)),ie=Math.min(g.paragraphs.length,J+y),oe=g.paragraphs.slice(J,ie);T(oe)},[i.fontSize,i.lineHeight,i.paragraphSpacing]);c.useEffect(()=>{if(!m||!d)return;const g=b=>{V.current=b;const y=o.getWord(d,b);F(y),q(d,b),P.current&&clearTimeout(P.current),P.current=setTimeout(()=>{H.getInstance().saveBook({...l,lastTokenIndex:b,bookmarkProgress:a.progress,lastOpened:new Date})},500)},j=b=>{U.current=b,E(b),b||H.getInstance().saveBook({...l,lastTokenIndex:a.position,bookmarkProgress:a.progress,lastOpened:new Date})},C=a.onPosition(g),N=a.onPlayState(j);return g(a.position),j(a.isPlaying),()=>{C(),N(),P.current&&clearTimeout(P.current)}},[m,d,q,l]);const se=c.useCallback(g=>{I.impactLight(),a.position=g,a.play()},[]),ne=c.useCallback(()=>{I.impactMedium(),a.toggle()},[]),ae=c.useCallback(g=>{g.target.closest(".flow-word")||n()},[n]),re=c.useCallback(()=>{if(G.current||w||!d)return;const g=h.current;if(!g)return;const j=g.scrollTop;u(j);const C=i.fontSize*i.lineHeight+i.paragraphSpacing,N=Math.floor(j/C),b=d.paragraphs[N];b&&b.startIndex!==a.position&&(a.position=b.startIndex)},[d,w,i.fontSize,i.lineHeight,i.paragraphSpacing]);if(!m){const g={extracting:"Extracting text from chapters...",tokenizing:"Analyzing word patterns...",optimizing:"Optimizing for speed...",ready:"Ready to read!"},j={extracting:"ðŸ“–",tokenizing:"ðŸ”",optimizing:"âš¡",ready:"âœ¨"};return e.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-8",style:{backgroundColor:r.background},children:e.jsxs("div",{className:"w-full max-w-md mx-auto",children:[e.jsx("div",{className:"bg-opacity-50 backdrop-blur-sm rounded-2xl p-6 mb-8 border",style:{backgroundColor:r.surface||r.background,borderColor:r.borderColor,boxShadow:`0 8px 32px ${r.accent}10`},children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-16 bg-gradient-to-br rounded-lg flex items-center justify-center text-2xl",style:{background:`linear-gradient(135deg, ${r.accent}20, ${r.accent}40)`},children:"ðŸ“š"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-lg truncate",style:{color:r.primaryText},children:l.title||"Untitled Book"}),l.author&&e.jsxs("p",{className:"text-sm opacity-75 truncate",style:{color:r.secondaryText},children:["by ",l.author]}),l.chapters&&e.jsxs("p",{className:"text-xs opacity-60 mt-1",style:{color:r.secondaryText},children:[l.chapters.length," chapter",l.chapters.length!==1?"s":""]})]})]})}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"text-4xl mb-4",children:j[z]}),e.jsx("h4",{className:"text-lg font-medium mb-2",style:{color:r.primaryText},children:g[z]}),A&&z!=="ready"&&e.jsxs("p",{className:"text-sm opacity-70",style:{color:r.secondaryText},children:["~",Math.ceil(A/1e3),"s remaining"]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between text-xs mb-2",style:{color:r.secondaryText},children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[O,"%"]})]}),e.jsx("div",{className:"h-2 rounded-full overflow-hidden",style:{backgroundColor:r.borderColor},children:e.jsx("div",{className:"h-full rounded-full transition-all duration-500 ease-out",style:{width:`${O}%`,backgroundColor:r.accent,boxShadow:`0 0 10px ${r.accent}40`}})})]}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-xs opacity-60 leading-relaxed",style:{color:r.secondaryText},children:"First-time setup optimizes your book for lightning-fast reading. Future loads will be instant! âš¡"})})]})})}return!d||d.paragraphs.length===0?e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",style:{backgroundColor:r.background},children:e.jsxs("div",{className:"text-center px-8",children:[e.jsx("div",{className:"text-6xl mb-4",children:"âš¡"}),e.jsx("p",{className:"text-lg font-medium",style:{color:r.secondaryText},children:"no content found"})]})}):w&&$?e.jsxs("div",{className:"absolute inset-0 flex items-center justify-center select-none",style:{backgroundColor:r.background},onClick:ne,children:[e.jsx(Se,{currentWord:$,fontSize:te,fontFamily:L,textColor:r.primaryText,accentColor:r.accent}),e.jsx("div",{className:"absolute left-8 right-8 bottom-8 h-1 rounded-full overflow-hidden",style:{backgroundColor:r.borderColor},children:e.jsx("div",{className:"h-full rounded-full",style:{width:`${a.progress*100}%`,backgroundColor:r.accent,opacity:.6,transition:"width 100ms linear"}})}),e.jsx("div",{className:"absolute top-8 left-1/2 -translate-x-1/2 text-xs uppercase tracking-widest",style:{color:r.secondaryText,opacity:.4},children:"tap to pause"})]}):e.jsx("div",{ref:h,className:"absolute inset-0 overflow-y-auto overflow-x-hidden",style:{backgroundColor:r.background,WebkitOverflowScrolling:"touch"},onClick:ae,onScroll:re,children:e.jsx("div",{ref:x,className:"w-full min-h-full",style:{maxWidth:"65ch",margin:"0 auto",padding:"80px 24px 200px"},children:M.map(g=>e.jsx(je,{paragraph:g,fontSize:i.fontSize,lineHeight:i.lineHeight,paragraphSpacing:i.paragraphSpacing,fontFamily:L,textColor:r.primaryText,accentColor:r.accent,currentWordIndex:a.position,onWordClick:se},g.startIndex))})})},Me=({book:l,onClose:n})=>{const s=R.getInstance(),t=X(),{settings:a,updateSettings:o}=ee(),[r,i]=c.useState(!0),[h,x]=c.useState(!1),[d,f]=c.useState(0),[m,p]=c.useState(a.rsvpSpeed||300),[w,E]=c.useState(a.showGhostPreview??!0),[$,F]=c.useState(!1),M=c.useRef(),T=c.useRef();c.useEffect(()=>{s.wpm=a.rsvpSpeed||300,p(s.wpm),E(a.showGhostPreview??!0);const u=s.onPosition(k=>{f(s.progress),T.current&&clearTimeout(T.current),T.current=setTimeout(()=>{const L={...l,lastTokenIndex:k,bookmarkProgress:s.progress,lastOpened:new Date};H.getInstance().saveBook(L)},200)}),S=s.onPlayState(k=>{if(x(k),k)M.current=setTimeout(()=>i(!1),3e3);else{i(!0),T.current&&clearTimeout(T.current);const L={...l,lastTokenIndex:s.position,bookmarkProgress:s.progress,lastOpened:new Date};H.getInstance().saveBook(L)}});return()=>{if(u(),S(),M.current&&clearTimeout(M.current),T.current){clearTimeout(T.current);const k={...l,lastTokenIndex:s.position,bookmarkProgress:s.progress,lastOpened:new Date};H.getInstance().saveBook(k)}}},[l.id]),c.useEffect(()=>()=>s.stop(),[]);const z=c.useCallback(()=>{s.stop(),n(l.id,s.position,s.progress)},[l.id,n]),B=c.useCallback(()=>{I.impactMedium(),s.toggle()},[]),O=c.useCallback(()=>{I.impactLight(),s.skipBack(50)},[]),W=c.useCallback(u=>{I.impactLight();const S=Math.max(100,Math.min(800,m+u));s.wpm=S,p(S),o({rsvpSpeed:S,hasCustomSpeed:!0})},[m,o]),A=c.useCallback(()=>{I.impactLight();const u=!w;E(u),o({showGhostPreview:u})},[w,o]),D=c.useCallback(()=>{I.impactLight();const u=Q.getInstance(),S=u.mode,k=S==="Night"?"Modern":S==="Modern"?"Sepia":"Night";u.setMode(k)},[]),U=c.useCallback(()=>{M.current&&clearTimeout(M.current),i(u=>!u),F(!1)},[]),V=c.useCallback(u=>{s.progress=parseFloat(u.target.value)},[]),G=c.useCallback(u=>{I.impactLight();const S=Math.max(14,Math.min(32,a.fontSize+u));o({fontSize:S})},[a.fontSize,o]);c.useEffect(()=>{const u=()=>{h?s.stop():z()};return window.addEventListener("popstate",u),()=>window.removeEventListener("popstate",u)},[h,z]);const P=Q.getInstance(),Z=P.mode==="Night"?le:P.mode==="Sepia"?ce:de;return e.jsxs("div",{className:"fixed inset-0 z-50 w-full h-[100dvh] overflow-hidden",style:{backgroundColor:t.background},children:[e.jsx(ve,{book:l,onToggleChrome:U,isActive:!0,showGhostWords:w}),e.jsx("div",{className:"fixed left-0 right-0 z-[60] flex justify-center pointer-events-none",style:{bottom:"max(20px, env(safe-area-inset-bottom))"},children:e.jsxs("div",{className:`pointer-events-auto shadow-xl backdrop-blur-2xl border flex flex-col rounded-2xl overflow-hidden transition-all duration-300 ease-out ${r?"translate-y-0 opacity-100":"translate-y-4 opacity-0"}`,style:{backgroundColor:t.surface+"f0",borderColor:t.borderColor,maxWidth:"420px",width:"calc(100% - 24px)"},children:[e.jsxs("div",{className:"px-4 pt-3 pb-1",children:[e.jsx("input",{type:"range",min:"0",max:"1",step:"0.0001",value:d,onChange:V,className:"w-full h-1.5 rounded-full appearance-none cursor-pointer touch-pan-x",style:{background:`linear-gradient(to right, ${t.accent} ${d*100}%, ${t.borderColor} ${d*100}%)`}}),e.jsxs("div",{className:"flex justify-between mt-1.5 px-0.5",children:[e.jsx("span",{className:"text-[10px] tabular-nums",style:{color:t.secondaryText,opacity:.6},children:d<.1?"ðŸŒ± just starting":d<.25?`${Math.round(d*100)}% ðŸŒ¿`:d<.5?`${Math.round(d*100)}% ðŸ“– nice pace`:d<.75?`${Math.round(d*100)}% âœ¨ halfway!`:d<.9?`${Math.round(d*100)}% ðŸ”¥ almost there`:`${Math.round(d*100)}% ðŸŽ¯ so close!`}),e.jsxs("span",{className:"text-[10px] tabular-nums",style:{color:t.secondaryText,opacity:.6},children:["~",Math.round((1-d)*s.total/Math.max(1,m)),"m left"]})]})]}),e.jsxs("div",{className:"flex items-center gap-1 px-1.5 pb-2",children:[e.jsx("button",{onClick:O,className:"w-9 h-9 rounded-xl flex items-center justify-center hover:bg-black/5 transition-colors active:scale-90",style:{color:t.secondaryText},"aria-label":"Rewind",children:e.jsx(he,{size:18})}),e.jsx("div",{className:"w-px h-5",style:{backgroundColor:t.borderColor}}),e.jsx("button",{onClick:()=>W(-25),className:"w-8 h-9 rounded-xl flex items-center justify-center hover:bg-black/5 transition-colors active:scale-90",style:{color:t.secondaryText},"aria-label":"Slower",children:e.jsx(pe,{size:16})}),e.jsxs("div",{className:"h-9 px-2 rounded-xl flex items-center justify-center gap-1 min-w-[70px]",style:{backgroundColor:`${t.primaryText}06`},children:[e.jsx("span",{className:"text-sm font-bold tabular-nums",style:{color:t.primaryText},children:m}),e.jsx("span",{className:"text-[10px] lowercase opacity-50",style:{color:t.secondaryText},children:"wpm"})]}),e.jsx("button",{onClick:()=>W(25),className:"w-8 h-9 rounded-xl flex items-center justify-center hover:bg-black/5 transition-colors active:scale-90",style:{color:t.secondaryText},"aria-label":"Faster",children:e.jsx(ue,{size:16})}),e.jsx("div",{className:"w-px h-5",style:{backgroundColor:t.borderColor}}),e.jsx("button",{onClick:B,className:"flex-1 flex items-center justify-center gap-1.5 h-9 rounded-xl font-semibold text-white shadow-md active:scale-[0.97] transition-all duration-150 text-sm hover:brightness-105",style:{backgroundColor:t.accent,minWidth:"80px"},"aria-label":h?"Pause":"Play",children:h?e.jsxs(e.Fragment,{children:[e.jsx(xe,{size:16})," ",e.jsx("span",{className:"lowercase",children:"pause"})]}):e.jsxs(e.Fragment,{children:[e.jsx(ge,{size:16,className:"ml-0.5"})," ",e.jsx("span",{className:"lowercase",children:"flow~"})]})}),e.jsx("div",{className:"w-px h-5",style:{backgroundColor:t.borderColor}}),e.jsx("button",{onClick:A,className:`w-9 h-9 rounded-xl flex items-center justify-center transition-colors active:scale-90 ${w?"":"opacity-40"}`,style:{backgroundColor:w?`${t.accent}15`:"transparent",color:w?t.accent:t.secondaryText},"aria-label":"Toggle context",children:w?e.jsx(me,{size:17}):e.jsx(fe,{size:17})}),e.jsx("button",{onClick:D,className:"w-9 h-9 rounded-xl flex items-center justify-center hover:bg-black/5 transition-colors active:scale-90",style:{color:t.secondaryText},"aria-label":"Toggle theme",children:e.jsx(Z,{size:17})}),e.jsx("button",{onClick:()=>F(u=>!u),className:"w-9 h-9 rounded-xl flex items-center justify-center transition-colors active:scale-90",style:{backgroundColor:$?`${t.accent}15`:"transparent",color:$?t.accent:t.secondaryText},"aria-label":"Text size",children:e.jsx(ye,{size:17})})]}),$&&e.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-t",style:{borderColor:t.borderColor},children:[e.jsx("span",{className:"text-xs lowercase",style:{color:t.secondaryText},children:"text size"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>G(-2),className:"w-9 h-9 rounded-xl flex items-center justify-center active:scale-90 transition-transform",style:{backgroundColor:`${t.primaryText}06`,color:t.primaryText},children:e.jsx("span",{className:"text-sm",children:"A"})}),e.jsx("span",{className:"text-sm font-semibold w-8 text-center tabular-nums",style:{color:t.primaryText},children:a.fontSize}),e.jsx("button",{onClick:()=>G(2),className:"w-9 h-9 rounded-xl flex items-center justify-center active:scale-90 transition-transform",style:{backgroundColor:`${t.primaryText}06`,color:t.primaryText},children:e.jsx("span",{className:"text-lg",children:"A"})})]})]})]})}),e.jsx("div",{className:`fixed top-0 left-0 right-0 z-[60] transition-all duration-300 ease-out ${r?"translate-y-0 opacity-100":"-translate-y-full opacity-0 pointer-events-none"}`,children:e.jsx("div",{className:"backdrop-blur-2xl border-b",style:{backgroundColor:`${t.surface}e8`,borderColor:t.borderColor,paddingTop:"max(12px, env(safe-area-inset-top))"},children:e.jsxs("div",{className:"flex items-center px-4 pb-3",children:[e.jsx("button",{onClick:z,className:"w-10 h-10 rounded-full flex items-center justify-center transition-all active:scale-90",style:{backgroundColor:`${t.primaryText}08`,color:t.primaryText},"aria-label":"Back",children:e.jsx(be,{size:22})}),e.jsxs("div",{className:"flex-1 mx-3 text-center",children:[e.jsx("h1",{className:"text-sm font-semibold truncate",style:{color:t.primaryText},children:l.title}),e.jsx("p",{className:"text-[10px] opacity-50 truncate",style:{color:t.secondaryText},children:l.author})]}),e.jsx("div",{className:"w-10"})]})})}),e.jsx("style",{children:`
        input[type="range"] {
          -webkit-appearance: none;
          appearance: none;
        }
        input[type="range"]::-webkit-slider-thumb {
          -webkit-appearance: none;
          width: 14px;
          height: 14px;
          border-radius: 50%;
          background: ${t.accent};
          cursor: pointer;
          box-shadow: 0 1px 4px rgba(0,0,0,0.2);
        }
        input[type="range"]::-moz-range-thumb {
          width: 14px;
          height: 14px;
          border-radius: 50%;
          background: ${t.accent};
          cursor: pointer;
          box-shadow: 0 1px 4px rgba(0,0,0,0.2);
          border: none;
        }
      `})]})};export{Me as ReaderContainer};
