import{r as o,j as e,R as q}from"./animations-D9Wo9mUM.js";import{u as D,T as O}from"./index-CzpiAJnV.js";import{u as G,R as C}from"./rsvp-eqVIbU96.js";import{T as V}from"./cloud-Be3Yh6fZ.js";import{M as U,m as J,n as K,o as Q,p as Z,P as ee,q as te,r as se,E as ne,s as re,t as ie,u as oe}from"./icons-B3aCiBot.js";import"./vendor-react-uIRdnfX0.js";class M{constructor(){this.words=[],this.sourceText="",this.totalWords=0,this._position=0,this._isPlaying=!1,this._wpm=300,this.playbackTimer=null,this.positionListeners=new Set,this.playStateListeners=new Set}static getInstance(){return M.instance||(M.instance=new M),M.instance}load(n){if(this.stop(),this.sourceText=n,this.words=[],!n||n.length===0){this.totalWords=0;return}const r=Math.ceil(n.length/5);this.words=new Array(r);let t=0,s=-1,l=!0,d=!1;for(let f=0;f<=n.length;f++){const m=f<n.length?n[f]:" ",b=m===" "||m==="	"||m===`
`||m==="\r";if(m===`
`&&(d=!0),b&&!l&&s>=0){const v=n.slice(s,f);let x=0;const g=v[v.length-1];g==="."||g==="!"||g==="?"?x=2:(g===","||g===";"||g===":"||g==="â€”"||g==="â€“")&&(x=1),this.words[t]={text:v,start:s,end:f,index:t,trailingPause:x},t++,s=-1}else!b&&l&&(s=f,d&&t>0&&(this.words[t-1].trailingPause=3),d=!1);l=b}this.words.length=t,this.totalWords=t}get position(){return this._position}set position(n){const r=Math.max(0,Math.min(this.totalWords-1,n));r!==this._position&&(this._position=r,this.notifyPosition())}get progress(){return this.totalWords>0?this._position/this.totalWords:0}set progress(n){this.position=Math.floor(n*this.totalWords)}get total(){return this.totalWords}getWord(n){return this.words[n]||null}getCurrentWord(){return this.words[this._position]||null}getWindow(n,r){const t=Math.max(0,this._position-n),s=Math.min(this.totalWords,this._position+r);return this.words.slice(t,s)}getRange(n,r){const t=Math.max(0,n),s=Math.min(this.totalWords,t+r);return this.words.slice(t,s)}getParagraphs(n,r){const t=[];let s=[],l=n;for(let d=n;d<this.totalWords&&t.length<r;d++){const f=this.words[d];s.length===0&&(l=d),s.push(f),f.trailingPause===3&&(t.push({words:s,startIndex:l}),s=[])}return s.length>0&&t.length<r&&t.push({words:s,startIndex:l}),t}wordIndexFromProgress(n){return Math.floor(n*this.totalWords)}get isPlaying(){return this._isPlaying}get wpm(){return this._wpm}set wpm(n){this._wpm=Math.max(50,Math.min(1500,n)),this._isPlaying&&(this.stop(),this.play())}play(){this._isPlaying||this.totalWords===0||(this._isPlaying=!0,this.notifyPlayState(),this.scheduleNext())}stop(){this.playbackTimer!==null&&(clearTimeout(this.playbackTimer),this.playbackTimer=null),this._isPlaying&&(this._isPlaying=!1,this.notifyPlayState())}toggle(){this._isPlaying?this.stop():this.play()}scheduleNext(){if(!this._isPlaying)return;const n=this.getCurrentWord();if(!n){this.stop();return}let r=6e4/this._wpm;const t=n.trailingPause;t===1?r*=1.3:t===2?r*=1.8:t===3&&(r*=2.2);const s=n.text.length;s>10?r*=1.2:s>7?r*=1.1:s<=2&&(r*=.85),this.playbackTimer=window.setTimeout(()=>{this._position<this.totalWords-1?(this.position=this._position+1,this.scheduleNext()):this.stop()},r)}skipForward(n=10){this.position=this._position+n}skipBack(n=10){this.position=this._position-n}jumpToStart(){this.position=0}jumpToEnd(){this.position=this.totalWords-1}onPosition(n){return this.positionListeners.add(n),()=>this.positionListeners.delete(n)}onPlayState(n){return this.playStateListeners.add(n),()=>this.playStateListeners.delete(n)}notifyPosition(){const n=this._position;this.positionListeners.forEach(r=>r(n))}notifyPlayState(){const n=this._isPlaying;this.playStateListeners.forEach(r=>r(n))}getStats(){return{totalWords:this.totalWords,position:this._position,progress:this.progress,isPlaying:this._isPlaying,wpm:this._wpm}}}const ae=o.memo(({words:h,startIndex:n,activeIndex:r,isNearActive:t,fontSize:s,lineHeight:l,paragraphSpacing:d,fontFamily:f,textColor:m,accentColor:b,onWordTap:y})=>{const v=f==="New York"?'"New York", "Iowan Old Style", Georgia, serif':f==="OpenDyslexic"?'"OpenDyslexic", sans-serif':f==="Atkinson Hyperlegible"?'"Atkinson Hyperlegible", sans-serif':"system-ui, -apple-system, sans-serif";if(!t){const x=h.map(g=>g.text).join(" ");return e.jsx("p",{"data-start":n,style:{fontSize:`${s}px`,lineHeight:l,marginBottom:`${d}px`,fontFamily:v,color:m,textAlign:"justify",hyphens:"auto",WebkitHyphens:"auto",opacity:.9},children:x})}return e.jsx("p",{"data-start":n,style:{fontSize:`${s}px`,lineHeight:l,marginBottom:`${d}px`,fontFamily:v,color:m,textAlign:"justify",hyphens:"auto",WebkitHyphens:"auto"},children:h.map((x,g)=>{const w=x.index===r;return e.jsxs(q.Fragment,{children:[e.jsx("span",{"data-idx":x.index,style:{backgroundColor:w?b:"transparent",color:w?"#FFFFFF":"inherit",padding:w?"2px 4px":"0",margin:w?"-2px -4px":"0",borderRadius:w?"4px":"0",transition:"background-color 0.1s ease"},children:x.text}),g<h.length-1?" ":""]},x.index)})})}),le=o.memo(({word:h,nextWords:n,prevWords:r,fontSize:t,fontFamily:s,textColor:l,accentColor:d,showGhost:f})=>{if(!h)return null;const m=s==="New York"?'"New York", "Iowan Old Style", Georgia, serif':s==="OpenDyslexic"?'"OpenDyslexic", sans-serif':s==="Atkinson Hyperlegible"?'"Atkinson Hyperlegible", sans-serif':"system-ui, -apple-system, sans-serif",b=Math.min(t*2.2,56),y=h.text,v=y.length<=1?0:y.length<=5?1:y.length<=9?2:y.length<=13?3:4,x=y.slice(0,v),g=y[v]||"",w=y.slice(v+1);if(f){const W=b*.55;return e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center select-none overflow-hidden",children:[r.length>0&&e.jsx("div",{className:"absolute text-right px-6",style:{top:`calc(50% - ${b*.9}px)`,right:"50%",marginRight:"8px",fontFamily:m,fontSize:`${W}px`,color:l,opacity:.35,maxWidth:"45vw",whiteSpace:"nowrap",overflow:"hidden"},children:r.map(j=>j.text).join(" ")}),e.jsxs("div",{className:"relative flex items-center justify-center w-full",children:[e.jsx("div",{className:"absolute w-0.5 rounded-full",style:{backgroundColor:d,height:`${b*1.3}px`,left:"50%",transform:"translateX(-50%)",opacity:.8}}),e.jsxs("div",{className:"flex items-baseline",style:{fontFamily:m,fontSize:`${b}px`,fontWeight:500,letterSpacing:"0.01em"},children:[e.jsx("span",{className:"text-right",style:{color:l,minWidth:"42vw",paddingRight:"3px"},children:x}),e.jsx("span",{style:{color:d,fontWeight:700},children:g}),e.jsx("span",{className:"text-left",style:{color:l,minWidth:"42vw",paddingLeft:"3px"},children:w})]})]}),n.length>0&&e.jsx("div",{className:"absolute text-left px-6",style:{top:`calc(50% + ${b*.9}px)`,left:"50%",marginLeft:"8px",fontFamily:m,fontSize:`${W}px`,color:l,opacity:.25,maxWidth:"45vw",whiteSpace:"nowrap",overflow:"hidden"},children:n.map(j=>j.text).join(" ")})]})}return e.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center select-none overflow-hidden",children:e.jsxs("div",{className:"relative flex items-center justify-center w-full",children:[e.jsx("div",{className:"absolute w-0.5 rounded-full",style:{backgroundColor:d,height:`${b*1.3}px`,left:"50%",transform:"translateX(-50%)",opacity:.8}}),e.jsxs("div",{className:"flex items-baseline",style:{fontFamily:m,fontSize:`${b}px`,fontWeight:500,letterSpacing:"0.01em"},children:[e.jsx("span",{className:"text-right",style:{color:l,minWidth:"42vw",paddingRight:"3px"},children:x}),e.jsx("span",{style:{color:d,fontWeight:700},children:g}),e.jsx("span",{className:"text-left",style:{color:l,minWidth:"42vw",paddingLeft:"3px"},children:w})]})]})})}),ce=({book:h,onToggleChrome:n,isActive:r,showGhostWords:t=!0})=>{const s=M.getInstance(),l=D(),{settings:d,updateSettings:f}=G(),m=o.useRef(null),b=o.useRef(null),[y,v]=o.useState(!1),[x,g]=o.useState(0),[w,W]=o.useState(!1),[j,F]=o.useState(0),S=o.useRef(!1);o.useRef(0);const k=o.useRef(null),z=o.useRef(d.fontSize);o.useEffect(()=>{if(!h.chapters||h.chapters.length===0){v(!0);return}v(!1);const i=[...h.chapters].sort((u,p)=>u.sortOrder-p.sortOrder),a=[];for(const u of i)if(u.content){const p=u.content.replace(/<[^>]*>/g," ").replace(/&[a-z]+;/gi," ").replace(/\s+/g," ").trim();p&&a.push(p)}const c=a.join(`

`);s.load(c),F(s.total),h.lastTokenIndex!==void 0&&h.lastTokenIndex>0?s.position=h.lastTokenIndex:h.bookmarkProgress&&h.bookmarkProgress>0&&(s.progress=h.bookmarkProgress),s.wpm=d.wpm||300,g(s.position),v(!0),requestAnimationFrame(()=>{I(s.position,!1)})},[h.id]),o.useEffect(()=>{const i=s.onPosition(c=>{g(c),s.isPlaying&&I(c,!0),h.lastTokenIndex=c,h.bookmarkProgress=s.progress}),a=s.onPlayState(c=>{W(c)});return()=>{i(),a()}},[]);const I=o.useCallback((i,a)=>{if(!b.current||j===0)return;S.current=!0;const c=b.current.querySelector(`[data-start="${i}"]`);if(c){const u=m.current;if(u){const p=c.offsetTop-u.clientHeight*.3;u.scrollTo({top:Math.max(0,p),behavior:a?"smooth":"instant"})}}else{const u=m.current;if(u){const P=i/j*(u.scrollHeight-u.clientHeight);u.scrollTo({top:P,behavior:a?"smooth":"instant"})}}setTimeout(()=>{S.current=!1},a?500:50)},[j]);o.useEffect(()=>{const i=m.current;if(!i||!y)return;let a=!1;const c=()=>{S.current||a||(a=!0,requestAnimationFrame(()=>{if(!S.current&&i){const u=i.scrollTop/Math.max(1,i.scrollHeight-i.clientHeight),p=Math.floor(u*(j-1));Math.abs(p-x)>20&&(s.position=p)}a=!1}))};return i.addEventListener("scroll",c,{passive:!0}),()=>i.removeEventListener("scroll",c)},[y,j,x]),o.useEffect(()=>{const i=m.current;if(!i)return;const a=p=>{if(p.touches.length===2){const P=p.touches[0].clientX-p.touches[1].clientX,R=p.touches[0].clientY-p.touches[1].clientY;k.current=Math.sqrt(P*P+R*R),z.current=d.fontSize}},c=p=>{if(p.touches.length===2&&k.current!==null){p.preventDefault();const P=p.touches[0].clientX-p.touches[1].clientX,R=p.touches[0].clientY-p.touches[1].clientY,A=Math.sqrt(P*P+R*R)/k.current,X=Math.round(Math.max(12,Math.min(40,z.current*A)));X!==d.fontSize&&f({fontSize:X})}},u=()=>{k.current=null};return i.addEventListener("touchstart",a,{passive:!0}),i.addEventListener("touchmove",c,{passive:!1}),i.addEventListener("touchend",u,{passive:!0}),()=>{i.removeEventListener("touchstart",a),i.removeEventListener("touchmove",c),i.removeEventListener("touchend",u)}},[d.fontSize,f]);const N=o.useRef(null),T=o.useRef(null),$=o.useCallback(i=>{C.impactLight(),s.position=i,s.play()},[]),H=o.useCallback(()=>{C.impactMedium(),s.toggle()},[]),L=o.useCallback(i=>{const a="touches"in i?i.touches[0].clientX:i.clientX,c="touches"in i?i.touches[0].clientY:i.clientY;N.current={x:a,y:c,time:Date.now()},T.current&&clearTimeout(T.current),T.current=setTimeout(()=>{C.impactLight()},500)},[]),E=o.useCallback(i=>{if(T.current&&(clearTimeout(T.current),T.current=null),!N.current)return;const a="changedTouches"in i?i.changedTouches[0].clientX:i.clientX,c="changedTouches"in i?i.changedTouches[0].clientY:i.clientY,u=Math.abs(a-N.current.x),p=Math.abs(c-N.current.y);if(Date.now()-N.current.time<300&&u<15&&p<15){const A=i.target.dataset?.idx;A!==void 0?$(parseInt(A)):n()}N.current=null},[$,n]),_=o.useCallback(()=>{T.current&&(clearTimeout(T.current),T.current=null),N.current=null},[]),Y=o.useMemo(()=>j===0?[]:s.getParagraphs(0,1e4),[j,y]);return y?j===0?e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",style:{backgroundColor:l.background},children:e.jsxs("div",{className:"text-center px-8",children:[e.jsx("div",{className:"text-4xl mb-4",children:"ðŸ“–"}),e.jsx("p",{style:{color:l.secondaryText},children:"No content available"})]})}):e.jsxs("div",{ref:m,className:"absolute inset-0 overflow-y-auto overflow-x-hidden",style:{backgroundColor:l.background,WebkitOverflowScrolling:"touch",overscrollBehavior:"contain"},onTouchStart:L,onTouchEnd:E,onTouchCancel:_,onMouseDown:L,onMouseUp:E,children:[w&&e.jsxs("div",{className:"fixed inset-0 z-50",style:{backgroundColor:l.background},onClick:H,children:[e.jsx(le,{word:s.getCurrentWord(),nextWords:s.getRange(x+1,6),prevWords:s.getRange(Math.max(0,x-4),4),fontSize:d.fontSize,fontFamily:d.fontFamily,textColor:l.primaryText,accentColor:l.accent,showGhost:t}),e.jsx("div",{className:"absolute bottom-6 left-6 right-6 pointer-events-none",children:e.jsx("div",{className:"h-0.5 rounded-full overflow-hidden",style:{backgroundColor:`${l.primaryText}10`},children:e.jsx("div",{className:"h-full rounded-full",style:{backgroundColor:`${l.accent}60`,width:`${s.progress*100}%`,transition:"width 0.1s linear"}})})})]}),e.jsx("div",{ref:b,className:"w-full min-h-full",style:{maxWidth:"680px",margin:"0 auto",padding:"80px 24px 200px 24px"},children:Y.map((i,a)=>{const c=Math.abs(i.startIndex-x)<500;return e.jsx(ae,{words:i.words,startIndex:i.startIndex,activeIndex:x,isNearActive:c,fontSize:d.fontSize,lineHeight:d.lineHeight,paragraphSpacing:d.paragraphSpacing,fontFamily:d.fontFamily,textColor:l.primaryText,accentColor:l.accent,onWordTap:$},i.startIndex)})})]}):e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",style:{backgroundColor:l.background},children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 border-2 rounded-full animate-spin",style:{borderColor:l.accent,borderTopColor:"transparent"}}),e.jsx("span",{className:"text-sm lowercase tracking-wider",style:{color:l.secondaryText},children:"loading"})]})})},fe=({book:h,onClose:n})=>{const r=M.getInstance(),t=D(),{settings:s,updateSettings:l}=G(),[d,f]=o.useState(!0),[m,b]=o.useState(!1),[y,v]=o.useState(0),[x,g]=o.useState(s.rsvpSpeed||300),[w,W]=o.useState(s.showGhostPreview??!0),[j,F]=o.useState(!1),S=o.useRef(),k=o.useRef();o.useEffect(()=>{r.wpm=s.rsvpSpeed||300,g(r.wpm),W(s.showGhostPreview??!0);const a=r.onPosition(u=>{v(r.progress),k.current&&clearTimeout(k.current),k.current=setTimeout(()=>{const p={...h,lastTokenIndex:u,bookmarkProgress:r.progress,lastOpened:new Date};V.getInstance().saveBook(p)},500)}),c=r.onPlayState(u=>{b(u),u?S.current=setTimeout(()=>f(!1),3e3):f(!0)});return()=>{a(),c(),S.current&&clearTimeout(S.current),k.current&&clearTimeout(k.current)}},[h.id]),o.useEffect(()=>()=>r.stop(),[]);const z=o.useCallback(()=>{r.stop(),n(h.id,r.position,r.progress)},[h.id,n]),I=o.useCallback(()=>{C.impactMedium(),r.toggle()},[]),N=o.useCallback(()=>{C.impactLight(),r.skipBack(50)},[]),T=o.useCallback(a=>{C.impactLight();const c=Math.max(100,Math.min(800,x+a));r.wpm=c,g(c),l({rsvpSpeed:c,hasCustomSpeed:!0})},[x,l]),$=o.useCallback(()=>{C.impactLight();const a=!w;W(a),l({showGhostPreview:a})},[w,l]),H=o.useCallback(()=>{C.impactLight();const a=O.getInstance(),c=a.mode,u=c==="Night"?"Modern":c==="Modern"?"Sepia":"Night";a.setMode(u)},[]),L=o.useCallback(()=>{S.current&&clearTimeout(S.current),f(a=>!a),F(!1)},[]),E=o.useCallback(a=>{r.progress=parseFloat(a.target.value)},[]),_=o.useCallback(a=>{C.impactLight();const c=Math.max(14,Math.min(32,s.fontSize+a));l({fontSize:c})},[s.fontSize,l]);o.useEffect(()=>{const a=()=>{m?r.stop():z()};return window.addEventListener("popstate",a),()=>window.removeEventListener("popstate",a)},[m,z]);const Y=O.getInstance(),i=Y.mode==="Night"?U:Y.mode==="Sepia"?J:K;return e.jsxs("div",{className:"fixed inset-0 z-50 w-full h-[100dvh] overflow-hidden",style:{backgroundColor:t.background},children:[e.jsx(ce,{book:h,onToggleChrome:L,isActive:!0,showGhostWords:w}),e.jsx("div",{className:"fixed left-0 right-0 z-[60] flex justify-center pointer-events-none",style:{bottom:"max(20px, env(safe-area-inset-bottom))"},children:e.jsxs("div",{className:`pointer-events-auto shadow-xl backdrop-blur-2xl border flex flex-col rounded-2xl overflow-hidden transition-all duration-300 ease-out ${d?"translate-y-0 opacity-100":"translate-y-4 opacity-0"}`,style:{backgroundColor:t.surface+"f0",borderColor:t.borderColor,maxWidth:"420px",width:"calc(100% - 24px)"},children:[e.jsxs("div",{className:"px-4 pt-3 pb-1",children:[e.jsx("input",{type:"range",min:"0",max:"1",step:"0.0001",value:y,onChange:E,className:"w-full h-1.5 rounded-full appearance-none cursor-pointer touch-pan-x",style:{background:`linear-gradient(to right, ${t.accent} ${y*100}%, ${t.borderColor} ${y*100}%)`}}),e.jsxs("div",{className:"flex justify-between mt-1 px-0.5",children:[e.jsxs("span",{className:"text-[10px] tabular-nums",style:{color:t.secondaryText,opacity:.5},children:[Math.round(y*100),"%"]}),e.jsxs("span",{className:"text-[10px] tabular-nums",style:{color:t.secondaryText,opacity:.5},children:[Math.round((1-y)*r.total/Math.max(1,x)),"m"]})]})]}),e.jsxs("div",{className:"flex items-center gap-1 px-1.5 pb-2",children:[e.jsx("button",{onClick:N,className:"w-9 h-9 rounded-xl flex items-center justify-center hover:bg-black/5 transition-colors active:scale-90",style:{color:t.secondaryText},"aria-label":"Rewind",children:e.jsx(Q,{size:18})}),e.jsx("div",{className:"w-px h-5",style:{backgroundColor:t.borderColor}}),e.jsx("button",{onClick:()=>T(-25),className:"w-8 h-9 rounded-xl flex items-center justify-center hover:bg-black/5 transition-colors active:scale-90",style:{color:t.secondaryText},"aria-label":"Slower",children:e.jsx(Z,{size:16})}),e.jsx("div",{className:"h-9 px-2 rounded-xl flex items-center justify-center min-w-[60px]",style:{backgroundColor:`${t.primaryText}06`},children:e.jsx("span",{className:"text-sm font-semibold tabular-nums",style:{color:t.primaryText},children:x})}),e.jsx("button",{onClick:()=>T(25),className:"w-8 h-9 rounded-xl flex items-center justify-center hover:bg-black/5 transition-colors active:scale-90",style:{color:t.secondaryText},"aria-label":"Faster",children:e.jsx(ee,{size:16})}),e.jsx("div",{className:"w-px h-5",style:{backgroundColor:t.borderColor}}),e.jsx("button",{onClick:I,className:"flex-1 flex items-center justify-center gap-1.5 h-9 rounded-xl font-semibold text-white shadow-md active:scale-[0.98] transition-transform text-sm",style:{backgroundColor:t.accent,minWidth:"80px"},"aria-label":m?"Pause":"Play",children:m?e.jsxs(e.Fragment,{children:[e.jsx(te,{size:16})," ",e.jsx("span",{className:"lowercase",children:"pause"})]}):e.jsxs(e.Fragment,{children:[e.jsx(se,{size:16,className:"ml-0.5"})," ",e.jsx("span",{className:"lowercase",children:"play"})]})}),e.jsx("div",{className:"w-px h-5",style:{backgroundColor:t.borderColor}}),e.jsx("button",{onClick:$,className:`w-9 h-9 rounded-xl flex items-center justify-center transition-colors active:scale-90 ${w?"":"opacity-40"}`,style:{backgroundColor:w?`${t.accent}15`:"transparent",color:w?t.accent:t.secondaryText},"aria-label":"Toggle context",children:w?e.jsx(ne,{size:17}):e.jsx(re,{size:17})}),e.jsx("button",{onClick:H,className:"w-9 h-9 rounded-xl flex items-center justify-center hover:bg-black/5 transition-colors active:scale-90",style:{color:t.secondaryText},"aria-label":"Toggle theme",children:e.jsx(i,{size:17})}),e.jsx("button",{onClick:()=>F(a=>!a),className:"w-9 h-9 rounded-xl flex items-center justify-center transition-colors active:scale-90",style:{backgroundColor:j?`${t.accent}15`:"transparent",color:j?t.accent:t.secondaryText},"aria-label":"Text size",children:e.jsx(ie,{size:17})})]}),j&&e.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-t",style:{borderColor:t.borderColor},children:[e.jsx("span",{className:"text-xs lowercase",style:{color:t.secondaryText},children:"text size"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>_(-2),className:"w-9 h-9 rounded-xl flex items-center justify-center active:scale-90 transition-transform",style:{backgroundColor:`${t.primaryText}06`,color:t.primaryText},children:e.jsx("span",{className:"text-sm",children:"A"})}),e.jsx("span",{className:"text-sm font-semibold w-8 text-center tabular-nums",style:{color:t.primaryText},children:s.fontSize}),e.jsx("button",{onClick:()=>_(2),className:"w-9 h-9 rounded-xl flex items-center justify-center active:scale-90 transition-transform",style:{backgroundColor:`${t.primaryText}06`,color:t.primaryText},children:e.jsx("span",{className:"text-lg",children:"A"})})]})]})]})}),e.jsx("div",{className:`fixed top-0 left-0 right-0 z-[60] transition-all duration-300 ease-out ${d?"translate-y-0 opacity-100":"-translate-y-full opacity-0 pointer-events-none"}`,children:e.jsx("div",{className:"backdrop-blur-2xl border-b",style:{backgroundColor:`${t.surface}e8`,borderColor:t.borderColor,paddingTop:"max(12px, env(safe-area-inset-top))"},children:e.jsxs("div",{className:"flex items-center px-4 pb-3",children:[e.jsx("button",{onClick:z,className:"w-10 h-10 rounded-full flex items-center justify-center transition-all active:scale-90",style:{backgroundColor:`${t.primaryText}08`,color:t.primaryText},"aria-label":"Back",children:e.jsx(oe,{size:22})}),e.jsxs("div",{className:"flex-1 mx-3 text-center",children:[e.jsx("h1",{className:"text-sm font-semibold truncate",style:{color:t.primaryText},children:h.title}),e.jsx("p",{className:"text-[10px] opacity-50 truncate",style:{color:t.secondaryText},children:h.author})]}),e.jsx("div",{className:"w-10"})]})})}),e.jsx("style",{children:`
        input[type="range"] {
          -webkit-appearance: none;
          appearance: none;
        }
        input[type="range"]::-webkit-slider-thumb {
          -webkit-appearance: none;
          width: 14px;
          height: 14px;
          border-radius: 50%;
          background: ${t.accent};
          cursor: pointer;
          box-shadow: 0 1px 4px rgba(0,0,0,0.2);
        }
        input[type="range"]::-moz-range-thumb {
          width: 14px;
          height: 14px;
          border-radius: 50%;
          background: ${t.accent};
          cursor: pointer;
          box-shadow: 0 1px 4px rgba(0,0,0,0.2);
          border: none;
        }
      `})]})};export{fe as ReaderContainer};
