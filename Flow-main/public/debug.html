<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Flow Debug</title>
  <style>body{font-family:system-ui,Segoe UI,Roboto,Arial;margin:24px;background:#f7f7f9;color:#111}pre{background:#fff;border:1px solid #e6e6e9;padding:12px;border-radius:8px}</style>
</head>
<body>
  <h1>Flow Debug Info</h1>
  <p>This page prints runtime diagnostics to help identify browser-specific issues.</p>
  <pre id="out">Collecting...</pre>
  <script>
    (async function(){
      const out = document.getElementById('out');
      const info = {
        userAgent: navigator.userAgent,
        platform: navigator.platform,
        language: navigator.language,
        colorScheme: window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light',
        serviceWorkers: 'unsupported',
        url: location.href,
        time: new Date().toISOString()
      };
      if ('serviceWorker' in navigator) {
        try {
          const regs = await navigator.serviceWorker.getRegistrations();
          info.serviceWorkers = regs.map(r => ({scope: r.scope}));
        } catch(e) { info.serviceWorkers = String(e); }
      }
      // list some globals that may affect styling
      info.hasLocalStorageTheme = (localStorage && (localStorage.getItem('theme') || localStorage.getItem('color-scheme')) ) || null;
      out.textContent = JSON.stringify(info, null, 2);
    })();
  </script>
</body>
</html>
